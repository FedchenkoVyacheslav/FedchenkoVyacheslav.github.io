"use strict";function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a,r=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){s=!0,a=e},f:function(){try{r||null==o.return||o.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var t=document.querySelector(".modal_message-js"),n=document.querySelector(".footer__button_message-js"),e=document.querySelector(".modal__close_message-js"),o=document.querySelector(".form__input_message-js");n.addEventListener("click",function(){t.classList.remove("modal_close"),o.focus()}),e.addEventListener("click",function(){t.classList.add("modal_close"),n.focus()}),window.addEventListener("keydown",function(e){t.classList.contains("modal_close")||"Escape"!==e.code||(t.classList.add("modal_close"),n.focus())});var a=document.querySelector(".modal_register-js"),r=document.querySelector(".header__register-button_js"),s=document.querySelector(".mobile-header__register-button_js"),l=document.querySelector(".modal__close_register-js"),d=document.querySelector(".form__input_register-js");s.addEventListener("click",function(){a.classList.remove("modal_close"),d.focus()}),r.addEventListener("click",function(){a.classList.remove("modal_close"),d.focus()}),l.addEventListener("click",function(){a.classList.add("modal_close"),r.focus()}),window.addEventListener("keydown",function(e){a.classList.contains("modal_close")||"Escape"!==e.code||(a.classList.add("modal_close"),r.focus())});var m=document.querySelector(".modal_sing-in-js"),f=document.querySelector(".header__sing-in-button_js"),g=document.querySelector(".mobile-header__sing-in-button_js"),v=document.querySelector(".modal__close_sing-in-js"),h=document.querySelector(".form__input_sing-in-js");g.addEventListener("click",function(){m.classList.remove("modal_close"),h.focus()}),f.addEventListener("click",function(){m.classList.remove("modal_close"),h.focus()}),v.addEventListener("click",function(){m.classList.add("modal_close"),f.focus()}),window.addEventListener("keydown",function(e){m.classList.contains("modal_close")||"Escape"!==e.code||(m.classList.add("modal_close"),f.focus())});var p,_=document.querySelector(".header__mobile-menu_js"),b=document.querySelector(".mobile-header__button-close_js"),y=document.querySelector(".mobile-header");function w(e){for(var t={},n=e.querySelectorAll("input"),o=e.querySelectorAll("textarea"),a=n.length,r=0;r<a;r++){var s=n[r];switch(s.type){case"checkbox":s.checked?t[s.name]="yes":t[s.name]=s.value;break;default:t[s.name]=s.value}}a=o.length;for(var i=0;i<a;i++){var l=o[i];t[l.name]=l.value}return t}function L(n){n.classList.add("form__input_bad"),n.addEventListener("input",function e(t){n.classList.remove("form__input_bad"),n.removeEventListener("input",e)})}function S(n){n.classList.add("form__input_good"),n.addEventListener("input",function e(t){n.classList.remove("form__input_good"),n.removeEventListener("input",e)})}function k(e,t,n){for(var o=e.querySelectorAll("input"),a=e.querySelectorAll("textarea"),r=e.querySelector(".form__checkbox-indicator"),s=o.length,i=0;i<s;i++){var l=o[i];switch(l.type){case"checkbox":t[l.name]&&r.classList.add("form__checkbox-indicator_bad");break;default:t[l.name]?(L(l),E(l,t[l.name])):(S(l),x(l,n[l.name]))}}s=a.length;for(var c=0;c<s;c++){var u=a[c];t[u.name]?(L(u),E(u,t[u.name])):(S(u),x(u,n[u.name]))}}function q(e){return e.match(/^[0-9a-z-\.]+\@[0-9a-z-]{2,}\.[a-z]{2,}$/i)}function E(n,e){var o=document.createElement("div");o.classList.add("invalid-feedback"),o.innerText=e;var t=n.nextElementSibling;console.log(t),null==t&&(n.insertAdjacentElement("afterend",o),n.addEventListener("input",function e(t){o.remove(),n.removeEventListener("input",e)}))}function x(n,e){var o=document.createElement("div");o.classList.add("valid-feedback"),o.innerText=e;var t=n.nextElementSibling;console.log(t),null==t&&(n.insertAdjacentElement("afterend",o),n.addEventListener("input",function e(t){o.remove(),n.removeEventListener("input",e)}))}_.addEventListener("click",function(){y.classList.add("mobile-header_open")}),b.addEventListener("click",function(){y.classList.remove("mobile-header_open")}),p=document.querySelector(".top-button"),window.addEventListener("scroll",function(){var e=window.pageYOffset;1500<e&&p.classList.add("top-button_show"),e<1500&&p.classList.remove("top-button_show")}),p.addEventListener("click",function e(){var t=window.pageYOffset/50;0<window.pageYOffset&&(window.scrollBy(0,-t),setTimeout(e,0))}),document.forms["form-register"].addEventListener("submit",function(e){e.preventDefault();var t=e.target,n=w(t);console.log(n);var o=t.querySelector(".name-js"),a=t.querySelector(".surname-js"),r=t.querySelector(".location-js"),s=t.querySelector(".age-js"),i={},l={};null===n.email||""===n.email?i.email="This field is required":q(n.email)?l.email="All right":i.email='Please enter a valid email address (your entry is not in the format "somebody@example.com")',null===n.passwordRep||""===n.passwordRep?i.passwordRep="This field is required":n.password!=n.passwordRep?i.passwordRep="Password mismatch":l.passwordRep="All right",null===n.password||""===n.password?i.password="This field is required":n.password.length<3||20<=n.password.length?i.password="Password must be between 3 and 20 characters":l.password="All right",null===n.name||""===n.name?i.name="This field is required":parseInt(o.value)?i.name="This name is not valid":n.name.length<3||20<=n.name.length?i.name="Your name is too short or too long":l.name="All right",null===n.surname||""===n.surname?i.surname="This field is required":parseInt(a.value)?i.surname="This surname is not valid":n.surname.length<3||20<=n.surname.length?i.surname="Your surname is too short or too long":l.surname="All right",null===n.location||""===n.location?i.location="This field is required":parseInt(r.value)?i.location="This location is not valid":n.location.length<3||20<=n.location.length?i.location="Location name is too short or too long":l.location="All right",s.value<0||100<=s.value?i.age="This age is not valid":null===n.age||""===n.age?i.age="This field is required":l.age="All right","no"===n.acceptbutton&&(i.acceptbutton="You didn't agree to processing of your personal data"),k(t,i,l)}),document.forms["form-sing-in"].addEventListener("submit",function(e){e.preventDefault();var t=e.target,n=w(t);console.log(n);var o={},a={};null===n.email||""===n.email?o.email="This field is required":q(n.email)?a.email="All right":o.email='Please enter a valid email address (your entry is not in the format "somebody@example.com")',null===n.password||""===n.password?o.password="This field is required":n.password.length<3||20<=n.password.length?o.password="Password must be between 3 and 20 characters":a.password="All right",k(t,o,a)}),document.forms["form-message"].addEventListener("submit",function(e){e.preventDefault();var t=e.target,n=w(t);console.log(n);var o=t.querySelector(".name-js"),a=t.querySelector(".message-js"),r={},s={};null===n.email||""===n.email?r.email="This field is required":q(n.email)?s.email="All right":r.email='Please enter a valid email address (your entry is not in the format "somebody@example.com")',null===n.name||""===n.name?r.name="This field is required":parseInt(o.value)?r.name="This name is not valid":n.name.length<3||20<=n.name.length?r.name="Your name is too short or too long":s.name="All right",null===n.message||""===n.message?r.message="This field is required":parseInt(a.value)?r.message="This message is not valid":n.message.length<3||20<=n.message.length?r.message="Your message is too short or too long":s.message="All right",null===n.phone||""===n.phone?r.phone="This field is required":n.phone.match(/^(\s*)?(\+)?([-_():=+]?\d[- _():=+]?){10,14}(\s*)?$/)?s.phone="All right":r.phone="Please enter a valid phone number",null===n.messagetext||""===n.messagetext?r.messagetext="This field is required":n.messagetext.length<3?r.messagetext="Your message is too short":s.messagetext="All right","no"===n.acceptbutton&&(r.acceptbutton="You didn't agree to processing of your personal data"),k(t,r,s)});var O="https://academy.directlinedev.com";!function(){var s=document.querySelector(".filter__tag"),_=document.querySelector(".blog"),b=l(),y=document.querySelector(".selector-btn_back"),w=document.querySelector(".selector-btn_forward");function L(){return'\n    <div class="load-3">\n      <div class="line"></div>\n      <div class="line"></div>\n      <div class="line"></div>\n    </div>\n    '}function S(e){return'\n    <li class="blog__item">\n            <picture class="blog__img-box">\n              <source srcset="'.concat(O).concat(e.mobilePhotoUrl,", ").concat(O).concat(e.mobile2xPhotoUrl,'" media="(max-width: 700px)">\n              <source srcset="').concat(O).concat(e.tabletPhotoUrl,", ").concat(O).concat(e.tablet2xPhotoUrl,'" media="(max-width: 850px)">\n              <source srcset="').concat(O).concat(e.desktopPhotoUrl,", ").concat(O).concat(e.desktop2xPhotoUrl,'">\n              <img class="blog__img" src="').concat(O).concat(e.desktopPhotoUrl,'" width="320" height="236" alt="').concat(e.title,'"/>\n            </picture>\n            <div class="blog__content">\n              <ul class="blog__tag-list list-point-none">\n                ').concat(function(e){for(var t="",n=0;n<e.length;n++){var o=e[n];t+=function(e){return'\n      <li class="blog__tag blog__tag_'.concat(e.tagId,'"></li>\n    ')}(o)}return t}(e.tags),'\n              </ul>\n              <span class="blog__date blog__info">').concat(function(e){var t=new Date(e),n=t.getFullYear(),o=1+t.getMonth();o<10&&(o="0"+o);var a=t.getDate();a<10&&(a="0"+a);return a+"."+o+"."+n}(e.date),'</span>\n              <span class="blog__views blog__info">').concat(e.views,' views</span>\n              <span class="blog__comments blog__info">').concat(e.commentsCount,' comments</span>\n              <h2 class="blog__title">').concat(e.title,'</h2>\n              <p class="blog__text">').concat(e.text,'</p>\n              <a class="blog__link" href="#">Go to this post</a>\n            </div>\n          </li>\n    ')}function k(e){for(var r=e.page?+e.page:1,s=e.howShow?+e.howShow:5,t=(r-1)*s,n=JSON.stringify(e.tags||[]),o=e.commentsCount||[],a=1e6,i=-1,l=0;l<o.length;l++)var c=o[l].split("-")[0],u=o[l].split("-")[1],a=+E(+a,E(+c,+u)),i=+q(+i,q(+c,+u));var d={},m="";1e6!==a&&-1!==i&&(d.commentsCount={$between:[a,i]}),Object.keys(d)&&(m="&filter="+JSON.stringify(d));var f=+e.views,g=+q(+(g=1e6),+f);d.views={$between:[f,g]},Object.keys(d)&&(m="&filter="+JSON.stringify(d));var v="",h=[e.sortBy,"ASC"];Object.keys(h)&&(v="&sort="+JSON.stringify(h));var p=e.search;""!==p&&(d.title=p),Object.keys(d)&&(m="&filter="+JSON.stringify(d)),x("GET","/api/posts?limit=".concat(s,"&offset=").concat(t,"&tags=").concat(n).concat(m).concat(v),function(e){var t=JSON.parse(e.response);if(t.success){for(var n=t.data,o="",a=0;a<n.length;a++)o+=S(n[a]);_.innerHTML=o,function(t,o){var a=document.querySelector(".selector-pages");a.innerHTML="";for(var e=0;e<t;e++)!function(n){var e=document.createElement("a");e.classList.add("selector-link"),o===n+1&&e.classList.add("selector-link_active"),e.innerHTML=n+1,e.addEventListener("click",function(e){e.preventDefault();var t=j(A);t.page=n+1+"",T(t),k(b=t)}),a.insertAdjacentElement("beforeend",e)}(e);w.addEventListener("click",function(){var e;o<t&&(o+=1,(e=j(A)).page=o,T(e),k(b=e))}),y.addEventListener("click",function(){var e;1<o&&(--o,(e=j(A)).page=o,T(e),k(b=e))})}(t.count/s,r)}else alert("ERROR!");""===_.innerHTML&&(_.innerHTML='\n    <p class="blog__message">Nothing found</p>\n    ')},function(){_.innerHTML=L()})}function q(e,t){return t<e?e:t}function E(e,t){return t<e?t:e}function x(e,t,n,o,a){o&&o();var r=new XMLHttpRequest;r.open(e,O+t),r.send(),r.onload=function(){n(r)},r.onerror=function(){a&&a(r)}}function j(e){var t,n={},o=e.querySelectorAll("input"),a=(o.length,u(o));try{for(a.s();!(t=a.n()).done;){var r=t.value;switch(r.type){case"radio":r.checked&&(n[r.name]=r.value);break;case"checkbox":n[r.name]||(n[r.name]=[]),r.checked&&n[r.name].push(r.value);break;default:n[r.name]=r.value}}}catch(e){a.e(e)}finally{a.f()}return n}function i(e,t){var n,o=e.querySelectorAll("input"),a=(o.length,u(o));try{for(a.s();!(n=a.n()).done;){var r=n.value;switch(r.type){case"radio":t[r.name]&&t[r.name]===r.value&&(r.checked=!0);break;case"checkbox":if(t[r.name])if("object"===c(t[r.name]))for(var s=0;s<t[r.name].length;s++)t[r.name][s]===r.value&&(r.checked=!0);else t[r.name]===r.value&&(r.checked=!0);break;default:t[r.name]&&(r.value=t[r.name])}}}catch(e){a.e(e)}finally{a.f()}}function l(){var e={};if(location.search)for(var t=location.search.substring(1).split("&"),n=0;n<t.length;n++){var o=t[n].split("="),a=o[0],r=o[1].replace(/%20/g," ");e[a]?"string"==typeof e[a]?e[a]=[e[a],r]:e[a].push(r):e[a]=r}return e}function T(e){for(var t=[],n=Object.keys(e),o=0;o<n.length;o++)if("string"==typeof e[n[o]])t.push(n[o]+"="+e[n[o]]);else for(var a=0;a<e[n[o]].length;a++)t.push(n[o]+"="+e[n[o]][a]);window.history.replaceState({},document.title,"?"+t.join("&"))}x("GET","/api/tags",function(e){var t,n=JSON.parse(e.response);if(n.success){for(var o=n.data,a="",r=0;r<o.length;r++)a+=(t=o[r],'\n    <label class="filter__checkbox-label">\n      <input class="filter__form-checkbox hidden" type="checkbox" value="'.concat(t.id,'" name="tags">\n      <span class="filter__form-checkbox-indicator filter__form-checkbox-indicator_2 filter__form-checkbox-indicator_tag-').concat(t.id,'"></span>\n    </label>\n    '));s.innerHTML=a,i(A,l())}else alert("ERROR!")},function(){s.innerHTML=L()}),k(b),console.log();var e,A=document.forms.filterForm;i(A,l()),A.addEventListener("submit",function(e){e.preventDefault();var t=j(e.target);T(t),b.page="1",k(b=t)}),(e=j(A)).tags=[1,6],T(e),k(b=e)}();