"use strict";var t=document.querySelector(".modal_message-js"),n=document.querySelector(".footer__button_message-js"),e=document.querySelector(".modal__close_message-js"),s=document.querySelector(".form__input_message-js");n.addEventListener("click",function(){t.classList.remove("modal_close"),s.focus()}),e.addEventListener("click",function(){t.classList.add("modal_close"),n.focus()}),window.addEventListener("keydown",function(e){t.classList.contains("modal_close")||"Escape"!==e.code||(t.classList.add("modal_close"),n.focus())});var o=document.querySelector(".modal_register-js"),a=document.querySelector(".header__register-button_js"),i=document.querySelector(".mobile-header__register-button_js"),r=document.querySelector(".modal__close_register-js"),l=document.querySelector(".form__input_register-js");i.addEventListener("click",function(){o.classList.remove("modal_close"),l.focus()}),a.addEventListener("click",function(){o.classList.remove("modal_close"),l.focus()}),r.addEventListener("click",function(){o.classList.add("modal_close"),a.focus()}),window.addEventListener("keydown",function(e){o.classList.contains("modal_close")||"Escape"!==e.code||(o.classList.add("modal_close"),a.focus())});var d=document.querySelector(".modal_sing-in-js"),c=document.querySelector(".header__sing-in-button_js"),u=document.querySelector(".mobile-header__sing-in-button_js"),m=document.querySelector(".modal__close_sing-in-js"),v=document.querySelector(".form__input_sing-in-js");u.addEventListener("click",function(){d.classList.remove("modal_close"),v.focus()}),c.addEventListener("click",function(){d.classList.remove("modal_close"),v.focus()}),m.addEventListener("click",function(){d.classList.add("modal_close"),c.focus()}),window.addEventListener("keydown",function(e){d.classList.contains("modal_close")||"Escape"!==e.code||(d.classList.add("modal_close"),c.focus())});var f,h=document.querySelector(".header__mobile-menu_js"),g=document.querySelector(".mobile-header__button-close_js"),p=document.querySelector(".mobile-header");function _(e){for(var t={},n=e.querySelectorAll("input"),s=e.querySelectorAll("textarea"),o=n.length,a=0;a<o;a++){var i=n[a];switch(i.type){case"checkbox":i.checked?t[i.name]="yes":t[i.name]=i.value;break;default:t[i.name]=i.value}}o=s.length;for(var r=0;r<o;r++){var l=s[r];t[l.name]=l.value}return t}function y(n){n.classList.add("form__input_bad"),n.addEventListener("input",function e(t){n.classList.remove("form__input_bad"),n.removeEventListener("input",e)})}function L(n){n.classList.add("form__input_good"),n.addEventListener("input",function e(t){n.classList.remove("form__input_good"),n.removeEventListener("input",e)})}function b(e,t,n){for(var s=e.querySelectorAll("input"),o=e.querySelectorAll("textarea"),a=e.querySelector(".form__checkbox-indicator"),i=s.length,r=0;r<i;r++){var l=s[r];switch(l.type){case"checkbox":t[l.name]&&a.classList.add("form__checkbox-indicator_bad");break;default:t[l.name]?(y(l),S(l,t[l.name])):(L(l),q(l,n[l.name]))}}i=o.length;for(var d=0;d<i;d++){var c=o[d];t[c.name]?(y(c),S(c,t[c.name])):(L(c),q(c,n[c.name]))}}function w(e){return e.match(/^[0-9a-z-\.]+\@[0-9a-z-]{2,}\.[a-z]{2,}$/i)}function S(n,e){var s=document.createElement("div");s.classList.add("invalid-feedback"),s.innerText=e;var t=n.nextElementSibling;console.log(t),null==t&&(n.insertAdjacentElement("afterend",s),n.addEventListener("input",function e(t){s.remove(),n.removeEventListener("input",e)}))}function q(n,e){var s=document.createElement("div");s.classList.add("valid-feedback"),s.innerText=e;var t=n.nextElementSibling;console.log(t),null==t&&(n.insertAdjacentElement("afterend",s),n.addEventListener("input",function e(t){s.remove(),n.removeEventListener("input",e)}))}h.addEventListener("click",function(){p.classList.add("mobile-header_open")}),g.addEventListener("click",function(){p.classList.remove("mobile-header_open")}),f=document.querySelector(".top-button"),window.addEventListener("scroll",function(){var e=window.pageYOffset;1500<e&&f.classList.add("top-button_show"),e<1500&&f.classList.remove("top-button_show")}),f.addEventListener("click",function e(){var t=window.pageYOffset/50;0<window.pageYOffset&&(window.scrollBy(0,-t),setTimeout(e,0))});function E(e){var t=e.url,n=e.method,s=void 0===n?"GET":n,o=e.body,a=void 0===o?{}:o,i=e.headers;return fetch("https://academy.directlinedev.com"+t,{method:s,body:a,headers:void 0===i?{}:i})}var T=document.querySelector(".loader-container_js");function j(){return'\n  <div class="container-loader">\n    <div class="load-3">\n      <div class="line"></div>\n      <div class="line"></div>\n      <div class="line"></div>\n    </div>\n  </div>\n  '}document.forms["form-register"].addEventListener("submit",function(e){e.preventDefault(),T.innerHTML=j();var t=e.target,n=_(t);console.log(n);var s=t.querySelector(".name-js"),o=t.querySelector(".surname-js"),a=t.querySelector(".location-js"),i=t.querySelector(".age-js"),r={},l={};E({url:"/api/users",method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(e){return e.json()}).then(function(e){if(!e.success)throw e.errors;var t=e.data;T.innerHTML="",alert("пользователь ".concat(t.name," ").concat(t.surname))}).catch(function(e){T.innerHTML="",b(t,e,l),alert("".concat(JSON.stringify(e,null,2)))}),null===n.email||""===n.email?r.email="This field is required":w(n.email)?l.email="All right":r.email='Please enter a valid email address (your entry is not in the format "somebody@example.com")',null===n.passwordRep||""===n.passwordRep?r.passwordRep="This field is required":n.password!=n.passwordRep?r.passwordRep="Password mismatch":l.passwordRep="All right",null===n.password||""===n.password?r.password="This field is required":n.password.length<3||20<=n.password.length?r.password="Password must be between 3 and 20 characters":l.password="All right",null===n.name||""===n.name?r.name="This field is required":parseInt(s.value)?r.name="This name is not valid":n.name.length<3||20<=n.name.length?r.name="Your name is too short or too long":l.name="All right",null===n.surname||""===n.surname?r.surname="This field is required":parseInt(o.value)?r.surname="This surname is not valid":n.surname.length<3||20<=n.surname.length?r.surname="Your surname is too short or too long":l.surname="All right",null===n.location||""===n.location?r.location="This field is required":parseInt(a.value)?r.location="This location is not valid":n.location.length<3||20<=n.location.length?r.location="Location name is too short or too long":l.location="All right",i.value<18||100<=i.value?r.age="This age is not valid":null===n.age||""===n.age?r.age="This field is required":l.age="All right","no"===n.acceptbutton&&(r.acceptbutton="You didn't agree to processing of your personal data"),b(t,r,l)}),document.forms["form-sing-in"].addEventListener("submit",function(e){e.preventDefault();var t=e.target,n=_(t);console.log(n);var s={},o={};null===n.email||""===n.email?s.email="This field is required":w(n.email)?o.email="All right":s.email='Please enter a valid email address (your entry is not in the format "somebody@example.com")',null===n.password||""===n.password?s.password="This field is required":n.password.length<3||20<=n.password.length?s.password="Password must be between 3 and 20 characters":o.password="All right",b(t,s,o)}),document.forms["form-message"].addEventListener("submit",function(e){e.preventDefault(),T.innerHTML=j();var t=e.target,n=_(t);console.log(n);var s=t.querySelector(".name-js"),o=t.querySelector(".message-js"),a={},i={};E({url:"/api/emails",method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(e){return e.json()}).then(function(e){if(!e.success)throw e.errors;var t=e.data;T.innerHTML="",alert("пользователь ".concat(t.name," ").concat(t.surname))}).catch(function(e){T.innerHTML="",b(t,e,i),alert("".concat(JSON.stringify(e,null,2)))}),null===n.email||""===n.email?a.email="This field is required":w(n.email)?i.email="All right":a.email='Please enter a valid email address (your entry is not in the format "somebody@example.com")',null===n.name||""===n.name?a.name="This field is required":parseInt(s.value)?a.name="This name is not valid":n.name.length<3||20<=n.name.length?a.name="Your name is too short or too long":i.name="All right",null===n.message||""===n.message?a.message="This field is required":parseInt(o.value)?a.message="This message is not valid":n.message.length<3||20<=n.message.length?a.message="Your message is too short or too long":i.message="All right",null===n.phone||""===n.phone?a.phone="This field is required":n.phone.match(/^(\s*)?(\+)?([-_():=+]?\d[- _():=+]?){10,14}(\s*)?$/)?i.phone="All right":a.phone="Please enter a valid phone number",null===n.messagetext||""===n.messagetext?a.messagetext="This field is required":n.messagetext.length<3?a.messagetext="Your message is too short":i.messagetext="All right","no"===n.acceptbutton&&(a.acceptbutton="You didn't agree to processing of your personal data"),b(t,a,i)});var k=document.querySelector(".slider__wrapper"),x=document.querySelector(".slider__inner-wrapper"),A=document.querySelector(".slider__pagination"),Y=document.querySelector(".slider__button_back"),O=document.querySelector(".slider__button_next"),P=document.querySelectorAll(".slider__slide"),I=+getComputedStyle(k).width.split("px")[0],H=x.childElementCount-1,M=0,R=[];function C(){I=+getComputedStyle(k).width.split("px")[0];for(var e=0;e<P.length;e++)P[e].style.width=I+"px"}function z(e){e<0||H<e||(x.style.transition="margin-left .5s",R[M].classList.remove("slider__dot_active"),R[e].classList.add("slider__dot_active"),0<M-e&&O.removeAttribute("disabled"),M-e<0&&Y.removeAttribute("disabled"),0===e&&Y.setAttribute("disabled","disabled"),e===H&&O.setAttribute("disabled","disabled"),x.style.marginLeft="-"+I*e+"px",M=e,localStorage.setItem("activeSlide",M))}C(),function(){for(var e=0;e<P.length;e++)!function(e){var t=document.createElement("button");t.classList.add("slider__dot"),e===M&&t.classList.add("slider__dot_active"),t.addEventListener("click",function(){z(e)}),R[R.length]=t,A.insertAdjacentElement("beforeend",t)}(e)}(),O.addEventListener("click",function(){z(M+1)}),Y.addEventListener("click",function(){z(M-1)}),window.addEventListener("resize",function(){x.style.transition="",C(),z(M),x.style.transition="margin-left .5s"}),localStorage.getItem("activeSlide")&&z(+localStorage.getItem("activeSlide"));new Swiper(".swiper-container",{autoHeight:!0,spaceBetween:20,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});